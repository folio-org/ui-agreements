$fontSizeRem: 1.1;
$fontSize: $fontSizeRem * 1rem;
$toggleHeight: floor(1.2 * ($fontSizeRem * 16)) * 1px;
$toggleBGOn: theme-color('success');
$toggleBGOff: $gray-200;
$toggleBorder: $gray-500;
$toggleOn: $white;
$toggleOff: $white;

// Derrived properties.
$toggleSwitch: $toggleHeight - 2px;
$offset: floor(( $toggleHeight - $toggleSwitch) / 2);
$toggleWidth: (2 * $toggleSwitch);
$translation: ($toggleWidth - $toggleSwitch - $offset);
$widgetHeight: max($toggleSwitch, $toggleHeight);

.toggle {
  
  padding-left: 0;
  padding-top: floor(0.25 * $widgetHeight);
  padding-bottom: floor(0.25 * $widgetHeight);
  font-size: $fontSize;
  position: relative;
  
  & > input[type="checkbox"] {
    opacity: 0;
    
    & ~ label {
      display: inline-block;
      position: relative;
      line-height: $widgetHeight;
      font-size: $fontSize;
      cursor: pointer;
      padding-left: ($toggleWidth + $toggleSwitch);
      
      // Pseudo element for background of toggle.
      &:before {
        content: "";
        display: inline-block;
        position: absolute;
        left:0;
        background: $toggleBGOff;
        width: $toggleWidth;
        height: $toggleHeight;
        border: 1px solid $toggleBorder;
        border-radius: $toggleHeight / 2;
        cursor: pointer;
        box-shadow: inset 0 floor(0.05 * $toggleSwitch) floor(0.05 * $toggleSwitch) rgba(invert($toggleBGOff), 0.24);
        transition: all 0.5s linear;
      }
    
      // Pseudo element for toggle switch.
      &:after {
        content: "";
        display: inline-block;
        position: absolute;
        cursor: pointer;
        width: $toggleSwitch;
        height: $toggleSwitch;
        left: $offset + 1px;
        top: $offset;
        border-radius: $toggleSwitch / 2;
        background: $toggleOff;
        box-shadow: floor(0.15 * $toggleSwitch) floor(0.15 * $toggleSwitch) floor(0.3 * $toggleSwitch) rgba(invert($toggleOff), 0.24);
        transition: all .2s ease-in;
      }
    }
    
    &:checked ~ label {
      &:after {
        background: $toggleOn;
        transform: translatex($translation);
        box-shadow: floor(0.15 * $toggleSwitch) floor(0.15 * $toggleSwitch) floor(0.3 * $toggleSwitch) rgba(invert($toggleOn), 0.24);
      }
      &:before {
        background: $toggleBGOn;
      }
    }
  }
}  
